@model FenixAlliance.ABM.Models.Global.Carts.Cart
@using FenixAlliance.ABM.Models.Global.Globe

@{
    var CartCurrency = ViewBag.Currency as Currency;
    var ExchangeRates = JsonConvert.DeserializeObject<OpenExchangeRateModel>(ViewBag.ExchangeRates);
}

<!-- Currency Exchange -->
<script>
    const CartID = '@ViewBag.CartID';
    const CartCurrencyCode = '@CartCurrency.ISOCode';
    const CurrentHolderGUID = '@ViewBag.CurrentHolderGUID';
    const CurrentUserIP = '@ViewBag.CurrentUserIP';

    const CurrencyFormatter = new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: CartCurrencyCode,
        minimumFractionDigits: 2
    });
    fx.base = "USD";
    fx.rates = {
       @foreach (var item in ExchangeRates?.Rates ?? new Dictionary<string,double>())
        {
            var pair = $"\"{@item.Key}\":{@item.Value.ToString().Replace(',', '.')},";
            @Html.Raw(pair);
        }
    };
</script>